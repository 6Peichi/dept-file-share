# æª”æ¡ˆæª¢æŸ¥æ¸…å–®

## ğŸ“¦ å®Œæ•´æª”æ¡ˆåˆ—è¡¨

å®‰è£å‰è«‹ç¢ºèªä»¥ä¸‹æ‰€æœ‰æª”æ¡ˆéƒ½å·²å»ºç«‹ï¼š

### æ ¹ç›®éŒ„æª”æ¡ˆ (8 å€‹)

- [ ] `app.py` - ä¸»ç¨‹å¼ï¼ˆç´„ 800 è¡Œï¼‰
- [ ] `start.sh` - å•Ÿå‹•è…³æœ¬
- [ ] `stop.sh` - åœæ­¢è…³æœ¬
- [ ] `status.sh` - ç‹€æ…‹æª¢æŸ¥è…³æœ¬
- [ ] `install.sh` - å¿«é€Ÿå®‰è£è…³æœ¬
- [ ] `requirements.txt` - Python å¥—ä»¶æ¸…å–®
- [ ] `README.md` - å°ˆæ¡ˆèªªæ˜
- [ ] `INSTALL.md` - å®Œæ•´å®‰è£æ‰‹å†Š

### templates/ ç›®éŒ„ (5 å€‹)

- [ ] `templates/home.html` - é¦–é 
- [ ] `templates/files.html` - æª”æ¡ˆç®¡ç†é é¢
- [ ] `templates/bookmarks.html` - æ›¸ç±¤ç®¡ç†é é¢
- [ ] `templates/excel_viewer.html` - Excel æª¢è¦–å™¨
- [ ] `templates/word_viewer.html` - Word æª¢è¦–å™¨

### è‡ªå‹•å»ºç«‹çš„ç›®éŒ„ï¼ˆç„¡éœ€æ‰‹å‹•å»ºç«‹ï¼‰

- [ ] `uploaded_files/` - ä¸Šå‚³æª”æ¡ˆç›®éŒ„
- [ ] `logs/` - æ—¥èªŒç›®éŒ„
- [ ] `venv/` - Python è™›æ“¬ç’°å¢ƒ

---

## ğŸ” æª”æ¡ˆé©—è­‰

### æª¢æŸ¥æª”æ¡ˆæ˜¯å¦å­˜åœ¨

```bash
cd ~/dept-file-share

# æª¢æŸ¥æ ¹ç›®éŒ„æª”æ¡ˆ
for file in app.py start.sh stop.sh status.sh install.sh requirements.txt README.md INSTALL.md; do
    if [ -f "$file" ]; then
        echo "âœ… $file"
    else
        echo "âŒ $file - ç¼ºå°‘"
    fi
done

# æª¢æŸ¥æ¨¡æ¿æª”æ¡ˆ
for file in home.html files.html bookmarks.html excel_viewer.html word_viewer.html; do
    if [ -f "templates/$file" ]; then
        echo "âœ… templates/$file"
    else
        echo "âŒ templates/$file - ç¼ºå°‘"
    fi
done
```

### æª¢æŸ¥æª”æ¡ˆå¤§å°

```bash
# æŸ¥çœ‹æª”æ¡ˆå¤§å°ï¼ˆæ‡‰è©²éƒ½æœ‰å…§å®¹ï¼‰
ls -lh app.py
ls -lh templates/*.html
ls -lh *.sh
```

é æœŸå¤§å°ï¼š
- `app.py`: ç´„ 25-30 KB
- `*.html`: å„ç´„ 10-20 KB
- `*.sh`: å„ç´„ 1-2 KB

### æª¢æŸ¥è…³æœ¬åŸ·è¡Œæ¬Šé™

```bash
# æª¢æŸ¥åŸ·è¡Œæ¬Šé™
ls -l *.sh

# æ‡‰è©²é¡¯ç¤º -rwxr-xr-xï¼ˆæœ‰ x è¡¨ç¤ºå¯åŸ·è¡Œï¼‰
# å¦‚æœæ²’æœ‰ï¼ŒåŸ·è¡Œï¼š
chmod +x start.sh stop.sh status.sh install.sh
```

---

## ğŸ“‹ å…§å®¹æª¢æŸ¥

### app.py å¿…é ˆåŒ…å«çš„é—œéµå…§å®¹

æ‰“é–‹ app.pyï¼Œç¢ºèªåŒ…å«ï¼š

```python
# é–‹é ­æ‡‰è©²æœ‰é€™äº› import
from flask import Flask
import openpyxl
from docx import Document
import pandas as pd

# æ‡‰è©²æœ‰é€™å€‹å‡½æ•¸ï¼ˆæ”¯æ´ä¸­æ–‡æª”åï¼‰
def safe_filename(filename):
    ...

# æ‡‰è©²æœ‰é€™äº›è·¯ç”±
@app.route('/')
@app.route('/files')
@app.route('/bookmarks')
@app.route('/view/<path:filepath>')
@app.route('/api/parse_excel/<path:filepath>')
@app.route('/api/parse_word/<path:filepath>')
```

### templates/home.html å¿…é ˆåŒ…å«

```html
<title>éƒ¨é–€æ–‡ä»¶åˆ†äº«ç³»çµ±</title>
<a href="/files" class="card files">
<a href="/bookmarks" class="card bookmarks">
```

### templates/files.html å¿…é ˆåŒ…å«

```html
<title>æª”æ¡ˆç®¡ç† - éƒ¨é–€æ–‡ä»¶åˆ†äº«ç³»çµ±</title>
<button class="toolbar-btn" onclick="openNewFolderModal()">
<form method="POST" action="/upload"
```

### templates/bookmarks.html å¿…é ˆåŒ…å«

```html
<title>ç¶²å€æ›¸ç±¤ - éƒ¨é–€æ–‡ä»¶åˆ†äº«ç³»çµ±</title>
<button class="toolbar-btn" onclick="openNewFolderModal()">
<button class="toolbar-btn" onclick="openAddBookmarkModal()">
```

### templates/excel_viewer.html å¿…é ˆåŒ…å«

```html
<title>{{ filename }} - Excel æª¢è¦–å™¨</title>
async function loadExcel()
function getCellClass(cell)
```

### templates/word_viewer.html å¿…é ˆåŒ…å«

```html
<title>{{ filename }} - Word æª¢è¦–å™¨</title>
async function loadWord()
function escapeHtml(text)
```

---

## âœ… å¿«é€Ÿé©—è­‰å‘½ä»¤

åŸ·è¡Œä»¥ä¸‹å‘½ä»¤é€²è¡Œå®Œæ•´æª¢æŸ¥ï¼š

```bash
cd ~/dept-file-share

echo "=== æª”æ¡ˆå­˜åœ¨æ€§æª¢æŸ¥ ==="
[ -f app.py ] && echo "âœ… app.py" || echo "âŒ app.py"
[ -f start.sh ] && echo "âœ… start.sh" || echo "âŒ start.sh"
[ -f stop.sh ] && echo "âœ… stop.sh" || echo "âŒ stop.sh"
[ -f status.sh ] && echo "âœ… status.sh" || echo "âŒ status.sh"
[ -f install.sh ] && echo "âœ… install.sh" || echo "âŒ install.sh"
[ -f requirements.txt ] && echo "âœ… requirements.txt" || echo "âŒ requirements.txt"
[ -f README.md ] && echo "âœ… README.md" || echo "âŒ README.md"
[ -f INSTALL.md ] && echo "âœ… INSTALL.md" || echo "âŒ INSTALL.md"

echo ""
echo "=== æ¨¡æ¿æª”æ¡ˆæª¢æŸ¥ ==="
[ -f templates/home.html ] && echo "âœ… home.html" || echo "âŒ home.html"
[ -f templates/files.html ] && echo "âœ… files.html" || echo "âŒ files.html"
[ -f templates/bookmarks.html ] && echo "âœ… bookmarks.html" || echo "âŒ bookmarks.html"
[ -f templates/excel_viewer.html ] && echo "âœ… excel_viewer.html" || echo "âŒ excel_viewer.html"
[ -f templates/word_viewer.html ] && echo "âœ… word_viewer.html" || echo "âŒ word_viewer.html"

echo ""
echo "=== Python èªæ³•æª¢æŸ¥ ==="
python3 -m py_compile app.py && echo "âœ… app.py èªæ³•æ­£ç¢º" || echo "âŒ app.py èªæ³•éŒ¯èª¤"

echo ""
echo "=== æª”æ¡ˆå¤§å°æª¢æŸ¥ ==="
FILE_SIZE=$(wc -c < app.py)
if [ $FILE_SIZE -gt 10000 ]; then
    echo "âœ… app.py å¤§å°: $FILE_SIZE bytes"
else
    echo "âš ï¸  app.py å¯èƒ½ä¸å®Œæ•´: $FILE_SIZE bytes"
fi

echo ""
echo "=== é—œéµå…§å®¹æª¢æŸ¥ ==="
grep -q "def safe_filename" app.py && echo "âœ… åŒ…å« safe_filename å‡½æ•¸" || echo "âŒ ç¼ºå°‘ safe_filename å‡½æ•¸"
grep -q "import openpyxl" app.py && echo "âœ… åŒ…å« openpyxl å°å…¥" || echo "âŒ ç¼ºå°‘ openpyxl å°å…¥"
grep -q "from docx import Document" app.py && echo "âœ… åŒ…å« docx å°å…¥" || echo "âŒ ç¼ºå°‘ docx å°å…¥"

echo ""
echo "=== æª¢æŸ¥å®Œæˆ ==="
```

---

## ğŸš¦ å®‰è£å‰æœ€çµ‚æª¢æŸ¥

åœ¨åŸ·è¡Œ `./install.sh` ä¹‹å‰ï¼š

1. âœ… æ‰€æœ‰æª”æ¡ˆéƒ½å·²å»ºç«‹
2. âœ… æª”æ¡ˆå…§å®¹å®Œæ•´ï¼ˆä¸æ˜¯ç©ºæª”æ¡ˆï¼‰
3. âœ… app.py èªæ³•æ­£ç¢º
4. âœ… è…³æœ¬æœ‰åŸ·è¡Œæ¬Šé™
5. âœ… åœ¨æ­£ç¢ºçš„ç›®éŒ„ (`~/dept-file-share`)

å…¨éƒ¨ç¢ºèªå¾Œï¼ŒåŸ·è¡Œï¼š
```bash
chmod +x install.sh
./install.sh
```

---

## ğŸ“ å»ºç«‹æª”æ¡ˆçš„é †åºå»ºè­°

å¦‚æœå¾é›¶é–‹å§‹å»ºç«‹ï¼Œå»ºè­°æŒ‰æ­¤é †åºï¼š

1. `requirements.txt` - æœ€ç°¡å–®
2. `README.md` - å°ˆæ¡ˆèªªæ˜
3. `INSTALL.md` - å®‰è£æ‰‹å†Š
4. `start.sh`, `stop.sh`, `status.sh` - ç®¡ç†è…³æœ¬
5. `install.sh` - å®‰è£è…³æœ¬
6. `templates/home.html` - é¦–é 
7. `templates/files.html` - æª”æ¡ˆç®¡ç†
8. `templates/bookmarks.html` - æ›¸ç±¤ç®¡ç†
9. `templates/excel_viewer.html` - Excel æª¢è¦–å™¨
10. `templates/word_viewer.html` - Word æª¢è¦–å™¨
11. `app.py` - ä¸»ç¨‹å¼ï¼ˆæœ€å¾Œï¼Œæœ€è¤‡é›œï¼‰

---

## ğŸ†˜ å¦‚æœç¼ºå°‘æª”æ¡ˆ

**æ–¹æ³• 1ï¼šé‡æ–°å»ºç«‹**
åƒè€ƒ INSTALL.md ä¸­çš„å®Œæ•´å…§å®¹ï¼Œé€ä¸€å»ºç«‹

**æ–¹æ³• 2ï¼šä½¿ç”¨ nano ç·¨è¼¯å™¨**
```bash
nano æª”æ¡ˆåç¨±
# è²¼ä¸Šå…§å®¹
# Ctrl+O å„²å­˜
# Enter ç¢ºèª
# Ctrl+X é›¢é–‹
```

**æ–¹æ³• 3ï¼šä½¿ç”¨ cat å»ºç«‹**
```bash
cat > æª”æ¡ˆåç¨± << 'EOF'
[è²¼ä¸Šå…§å®¹]
EOF
```

---

## âœ¨ å…¨éƒ¨å®Œæˆå¾Œ

åŸ·è¡Œå¿«é€Ÿé©—è­‰ï¼š
```bash
./install.sh
```

å¦‚æœçœ‹åˆ° "ğŸ‰ å®‰è£å®Œæˆï¼"ï¼Œè¡¨ç¤ºæ‰€æœ‰æª”æ¡ˆéƒ½æ­£ç¢ºï¼
